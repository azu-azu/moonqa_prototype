🗓️ 2025/06/01 \[Sunday] 09:45

# 🏷️ Phase 5 / Task 0: CI構成の設計

## 📌 Cause Summary

ログと自動テストの整備は完了しており、次に必要なのは「品質を継続的に守るための仕組み＝CI（継続的インテグレーション）」の導入である。
目的：CIで自動テストと品質管理を仕組み化する

---

## 🔍 Possible Causes

* `test_qa_search.py` が `pytest` で正常に動作する状態になっており、CIでの自動化が可能
* `manual_` 系ファイルは全て手動確認用であり、CI対象に含めるべきではない
* `.env` に依存している部分があるため、**ダミー環境変数の定義**がCI実行に必要

---

## 🛠️ Action Plan

* [☑️] **`tests/`配下の `test_qa_search.py` のみ**を `pytest` 対象と明示
* [☑️] `manual_*.py` はCI対象から除外（pytestからも無視される構成に）
* [☑️] `.env.example` を作成して、必要なダミー変数を明記（CIでのエラー防止）
* [☑️] `.github/workflows/ci.yml` を新規作成：

  * `ubuntu-latest` で動作
  * `poetry install` → `pytest tests/test_qa_search.py`
* [ ] `logs/qa_log.jsonl` の出力があっても CI は通るように設計

  * （例：`logs/` フォルダを `.gitignore` に追加する）

---

## 🧱 Structural Note

* CI設計の初期段階では、**「壊さない」ことが最重要**。
* 既存の構造（分離されたログ出力、責務が明確なテスト構成）を活かす形で、**最小限のCI構成から始める**のが正解。
* 後から通知やブランチ制御、ログ検証などを拡張できる構造にしておく。

---
